let receta_1, receta_2, receta_3, receta_4, receta_5, receta_6,receta_7, receta_8, receta_9, receta_10, receta_11, receta_12, receta_13;

receta_1 = {
    id: 1,
    titulo: "SMOOTHY ANTIOXIDANTE",
    tiempo: ["DESAYUNO"],
    tipo: ["Dietética", "Vegetariana", "Comida rápida"],
    calorias: 150,
    ingredientes: [
        "1 dátil o endulzante preferido",
        "100 g de frutos rojos(frescos o congelados)",
        "1/2 plátano",
        "30 ml de agua",
        "30 ml de leche vegetal o leche de vaca",
        "1/4 de taza de hielo",
        "30 g de granola (opcional)",
        "1 cucharadita de semillas de chía",
        "1 cucharadita de canela en polvo",
    ],
    preparacion: [
        `Añade el endulzante y los frutos rojos (reserva algunos para el topping), 
        el plátano, el agua, las semillas de chía y la leche a la licuadora.`,
        "Bate. Añade hielo y vuelve a batir hasta que quede una textura fina.",
        "Pon encima la granola y algunos frutos rojos.",
        "Espolvorea con la canela en polvo.",
    ],
};

receta_2 = {
    id: 2,
    titulo: "PANQUEQUES DE AVENA CON PLATANO",
    tiempo: ["DESAYUNO"],
    tipo: ["Dietética", "Vegetariana", "Comida rápida"],
    calorias: 120,
    ingredientes: [
        "5 cucharadas de harina de avena o en hojuelas",
        "100 g de fresas (opcional)",
        "75 ml de leche vegetal",
        "2 cucharadas de miel (opcional)",
        "½ cucharadita de polvo para hornear o levadura",
        "2 cucharadas de endulzante natural (stevia o panela)",
        "canela",
        "1 huevo",
        "2 plátanos",
        "mantequilla",
    ],
    preparacion: [
        "En la batidora o licuadora mezcle el huevo, el endulzante, la leche, la avena y el polvo de hornear.",
        "Pela los plátanos.",
        "Aplasta uno de ellos con un tenedor y añádelo al bol.",
        "Aromatiza con la vainilla.",
        "Bate hasta conseguir una crema homogénea.",
        "Calienta 1 cucharada de mantequilla en una sartén antiadherente pequeña y cuaja la masa anterior en forma de panqueques.",
        "Cuécelas 2 minutos por cada lado. Retirarlas y reservarlas.",
        "Limpia las fresas, lávalas y córtalas con el plátano restante en rodajas.",
        "Reparte los panqueques en los platos intercalando tortitas y capas de fruta.",
        "Vierte la miel por encima y sirve.",
    ],
};

receta_3 = {
    id: 3,
    titulo: "PUDÍN SEMILLAS DE CHÍA",
    tiempo: ["DESAYUNO", "ALMUERZO"],
    tipo: ["Dietética", "Vegetariana", "Comida rápida"],
    calorias: 100,
    ingredientes: [
        "2 peras o frutas de tu preferencia",
        "4 cucharadas de semillas de chía",
        "¾ de taza de bebida vegetal",
        "1 cucharadita de canela",
        "1 pera o fruta de tu preferencia",
        "Canela",
        "Granola crudivegana casera o frutos secos",
        "Nibs de cacao (opcional)",
    ],
    preparacion: [
        `Bate la bebida vegetal con una de las peras o frutas de tu preferencia, 
        la cucharadita de canela y las semillas de chía.`,
        "Deja reposar en la nevera toda la noche para que se forme el pudin.",
        "Por la mañana, haz capas en el recipiente donde se vaya a comer: pon primero fruta, luego un poco de chía, un poco de topping, más chía y la última capa que sea topping.",
    ],
};

receta_4 = {
    id: 4,
    titulo: "TORTITAS DE CLARAS CON FRESAS",
    tiempo: ["DESAYUNO"],
    tipo: ["Dietética"],
    calorias: 200,
    ingredientes: [
        "4 claras (que hayan sobrado de otro postre)",
        "50 g de avena molida",
        "50 g de azúcar glas",
        "50 g de panela o endulzante favorito",
        "30 ml de leche vegetal o leche de vaca",
        "1 vaina de vainilla",
        "200 g de fresas",
        "Margarina",
    ],
    preparacion: [
        "Cuece 50 ml de agua con el azúcar y la vainilla partida por la mitad 3 min, hasta obtener un sirope.",
        "Retira y deja infusionar; cuando se enfríe, desecha la vainilla.",
        "Añade las claras cucharada a cucharada y con movimientos envolventes para que no se bajen, hasta que todo quede bien integrado.",
        "Toma porciones de la masa, forma tortitas y dorarlas en una sartén engrasada con margarina.",
        "Hazlo por las dos caras y a fuego lento y reservarlas.",
        "Lava las fresas, sácalas con papel de cocina y pártelas por la mitad o en cuartos.",
        "Sirve las tortitas regadas con un hilo de sirope de vainilla y acompañadas de las fresas.",
        "Para que las claras se monten bien, deben estar a temperatura ambiente y para que queden más firmes, batirlas con una pizca de sal.",
        "Sirve las tortitas con la fruta que tengas.",
    ],
};

receta_5 = {
    id: 5,
    titulo: "PORRIGDE DE AVENA Y FRUTAS CON CHOCOLATE",
    tiempo: ["DESAYUNO", "CENA"],
    tipo: ["Vegetariana", "Comida rápida"],
    calorias: 160,
    ingredientes: [
        "1 taza y media de leche vegetal",
        "1 taza de avena en copos (a mi me gustan más los finos, porque no son tan duros y cuecen antes)",
        "1 banana",
        "Granada o frutos rojos",
        "Dos onzas de chocolate negro",
        "Avellanas (opcional)",
        "Coco rallado (opcional)",
        "Canela en polvo",
    ],
    preparacion: [
        "En una olla pequeña volcamos la leche vegetal, los copos y una cucharada sopera de coco rallado.",
        "Ponemos a cocer la olla por unos 5-8 minutos a fuego medio-bajo, removiendo de vez en cuando.",
        "Mientras, pelamos y cortamos la banana y vaciamos unas cucharadas de granada.",
        "Partimos dos onzas de chocolate y reservamos.",
        "Cuando nuestra avena empiece a espesar y coger una textura suave pero cremosa, apagamos el fuego y volcamos en un bol.",
        "Por encima, en el lado derecho, colocamos las rodajas finas de banana. A su lado, arriba, unas cucharadas de granada acompañada de unas pocas avellanas.",
        "Después, clavamos las dos onzas de chocolate negro en el lateral izquierdo superior, que con el calor irán fundiendo lentamente.",
        "Para terminar, espolvoreamos canela y coco rallado al gusto y ¡listo! A desayunar un porridge de avena vegano, saludable y delicioso.",
    ],
};

receta_6 = {
    id: 6,
    titulo: "FILETE DE POLLO A LA PLANCHA",
    tiempo: ["ALMUERZO"],
    tipo: ["Típica peruana"],
    calorias: 220,
    ingredientes: [
        "2 filetes de pechuga de pollo",
        "1 Limón",
        "1 pizca de pimienta",
        "1 diente de ajo",
        "1 pizca de orégano",
        "1 pizca de hierbas provenzales",
    ],
    preparacion: [
        "Prepara el marinado para el pollo, utiliza: limón o vinagre de manzana, el ajo (finamente picado) y las especies.",
        "Mezcla muy bien todos los ingredientes, hasta lograr homogeneidad, y reserva.",
        "El marinado proporciona sabor a la carne, jugosidad y suavidad.",
        "Acto seguido, impregna las pechugas fileteadas dentro de la mezcla, deja reposar entre 10 y 15 minutos.",
        "Pasado el tiempo, solo necesitas cocinarlo a la plancha (no agregues aceite).",
        `Recuerda, no apliques nada de sal. Entre las guarniciones con las que puedes acompañar esta receta, se encuentran el brócoli al vapor, 
        el arroz con cúrcuma, diversas ensaladas, entre otros. ¡Buen provecho!`,
    ],
};

receta_7 = {
    id: 7,
    titulo: "ATUN SALTEADO CON VERDURAS",
    tiempo: ["ALMUERZO"],
    tipo: ["Dietética", "Comida rápida", "Típica peruana"],
    calorias: 200,
    ingredientes: [
        "4 filetes de atún fresco",
        "1 manojo de cebolletas",
        "1 cebolla mediana",
        "3 dientes de ajo",
        "3 zanahorias",
        "3 cucharadas soperas de jerez, brandy o aguardiente",
        "1 cucharada sopera de curry (opcional)",
        "1 chorro de aceite de oliva",
        "1 pizca de sal",
        "1 pizca de pimienta",
        "1 puñado de semillas de ajonjolí (sésamo)",
    ],
    preparacion: [
        "Lava y pica todos los vegetales a la juliana, excepto el ajo y el brócoli.",
        "Estos debes triturarlos y separarlos en ramilletes respectivamente. Reserva todo.",
        "Corta el atún en cubos grandes y sal pimienta.",
        "Paso seguido, coloca un chorrito de aceite en un sartén grande o wok y espera hasta que esté caliente.",
        "Coloca dentro los trozos de pescado junto a la salsa de soja y el jerez; remueve hasta sellar la carne y reserva fuera del sartén.",
        "Por otra parte, cocina la coliflor al vapor y, simultáneamente, saltea los vegetales, preferiblemente dentro del sartén donde cocinaste el atún.",
        "Finalmente, incorpora el atún y el brócoli reservados, removiendo cuidadosamente durante dos minutos más. ¡Sirve a gusto!",
    ],
};

receta_8 = {
    id: 8,
    titulo: "CREMA FRIA DE AGUACATE Y LIMON",
    tiempo: ["DESAYUNO", "CENA"],
    tipo: ["Dietética", "Vegetariana"],
    calorias: 175,
    ingredientes: [
        "1 aguacate",
        "1 aguacate",
        "150 ml de caldo de verduras o pollo",
        "1 chorro de aceite de oliva",
        "1 manojo de cilantro",
        "1 pizca de sal y pimienta",
    ],
    preparacion: [
        `Lava las hojas de cilantro y desecha el tallo, por otra parte, obtén la pulpa del aguacate y exprime el limón. 
        Reserva todo.`,
        "Coloca en la licuadora el caldo, sal pimienta y procesa.",
        "Paso seguido, agrega el jugo de limón y las hojas de cilantro al caldo, licua de nuevo hasta obtener una textura homogénea.",
        "Finalmente, añade un chorrito de aceite de oliva y mezcla de nuevo.",
        "Refrigera por unos minutos y sirve bien fría.",
    ],
};

receta_9 = {
    id: 9,
    titulo: "ENSALADA DE GARBANZOS Y POLLO",
    tiempo: ["DESAYUNO", "ALMUERZO"],
    tipo: ["Dietética", "Típica peruana", "Comida rápida"],
    calorias: 110,
    ingredientes: [
        "200 g de garbanzos secos o cocidos",
        "1 pechuga de pollo fileteada",
        "1 pimiento amarillo",
        "1 cebolla tierna",
        "8 tomates cherry",
        "Cebollino fresco",
        "1 puñado de canónigos limpios",
        "1 pizca de sal",
        "1 pizca de pimienta",
        "1 chorro de aceite de oliva virgen extra",
        "1 chorro de jugo de limón",
    ],
    preparacion: [
        "Cocina los garbanzos (o compra una lata de garbanzos cocidos) y deja que se enfríen a temperatura ambiente para colarlos.",
        "Reserva. Lava y corta todos los vegetales: cebolla a la juliana o en cubos pequeños, pimiento en trozos o cubos pequeños, tomates cherry por la mitad y cebollino fresco picadito muy finito.",
        "Prepara una sartén grande con un chorrito de aceite de oliva y pocha la cebolla y el pimiento.",
        "Paso seguido, cocina la pechuga, en otra sartén, preferiblemente a la plancha (aunque la receta propone frito).",
        "Sólo sella el pollo por ambos lados.",
        "Luego, corta la pechuga en trocitos o tiras y agrégala a la sartén donde cocinaste los vegetales.",
        "Salpimienta todo y añade otro chorrito de aceite de oliva (preferiblemente el especial para freír).",
        "Coloca también los garbanzos y remueve todo con cuidado.",
        "Como antepenúltimo paso, agrega los tomates cherry y el cebollino en la sartén. Saltea por un par de minutos más.",
    ],
};

receta_10 = {
    id: 10,
    titulo: "ENSALADA DE LENTEJAS",
    tiempo: ["ALMUERZO", "CENA"],
    tipo: ["Dietética", "Vegetariana", "Comida rápida", "Típica peruana"],
    calorias: 130,
    ingredientes: [
        "400 g de lentejas, en conserva.",
        "1 pimiento rojo",
        "1 cebolleta",
        "Aceitunas sin hueso",
        "2 latas de atún al natural",
        "Maíz dulce",
        "Vinagre de manzana",
        "Sal",
        "Aceite de oliva virgen extra",
    ],
    preparacion: [
        "Primero, lavamos las lentejas bien bajo el grifo de agua fría.",
        "Las escurrimos bien, las ponemos a cocer por 20 minutos.",
        "Luego, las ponemos en una fuente y les añadimos el pimiento, la cebolleta y las aceitunas, todo picado finamente.",
        "Incorporamos el maíz y el atún.",
        "Una pizca de sal, vinagre de manzana y aceite de oliva virgen extra al gusto.",
        "Además, podemos guardarlo en el frigorífico hasta el momento de servir y ¡a disfrutar de esta sana y sencilla ensalada de lentejas!",
    ],
};

receta_11 = {
    id: 11,
    titulo: "SEPIA A LA PLANCHA",
    tiempo: ["ALMUERZO"],
    tipo: ["Dietética", "Típica peruana", "Comida rápida"],
    calorias: 210,
    ingredientes: [
        "2 sepias",
        "4-6 dientes de ajo",
        "Sal",
        "Pimienta recién molida",
        "Perejil fresco",
        "Aceite de oliva virgen extra",
    ],
    preparacion: [
        `Lo primero es limpiar la sepia, para ello hacemos un corte a lo largo y extraemos la parte dura o pluma, así como todo el interior.`,
        "Ponemos la sepia debajo del grifo, eliminamos todos los restos del interior y retiramos la piel.",
        "Cortamos las patas o tentáculos a la altura de los ojos y los desechamos; en el centro de los tentáculos está la boca o pico que también desechamos.",
        "Una vez limpia la sepia, que podéis encontrar ya limpia, escurrimos y secamos muy bien. Cortamos en trozos pequeños de bocado y reservamos.",
        "En un cuenco ponemos el ajo y el perejil picados finamente, un poco de pimienta recién molida, sal y un chorreón de aceite de oliva virgen extra, lo mezclamos todo bien con un tenedor y reservamos.",
        "También podemos machacarlo todo con un mortero.",
        "Ponemos la plancha o la sartén y dejamos que se caliente mucho; añadimos la sepia, dejamos cocinar un poco y cuando notemos que comienza a cambiar de color vertemos por encima el aliño de ajo y perejil, salteamos y en cuanto esté dorada la sepia así como los ajos servimos inmediatamente, ya que está rica recién hecha",
    ],
};

receta_12 = {
    id: 12,
    titulo: "MEJILLONES Y TABULE",
    tiempo: ["ALMUERZO"],
    tipo: ["Dietética"],
    calorias: 170,
    ingredientes: [
        "5 rodajas de merluza de centímetro y medio de grosor",
        "3 ajos",
        "Perejil",
        "Aceite de oliva virgen extra",
        "Sal al gusto",
    ],
    preparacion: [
        `En primer lugar preparamos el majado que vamos añadir a nuestra merluza una vez esté cocinada; para ello en un mortero añadimos: 
        3 dientes de ajo pelados, un manojo de perejil y un poco de aceite de oliva virgen extra y pizca de sal, majamos todo y reservamos.`,
        "Colocamos una cacerola bajita y ancha donde nos quepan las 5 rodajas de merluza.",
        "Añadimos un poco de aceite de oliva virgen extra y ponemos al fuego: éste tiene que estar bien fuerte, es uno de los trucos. Repartimos el aceite con un pincel por toda la base.",
        "Una vez el aceite esté bien caliente pero sin que llegue a humear, colocamos las rodajas o filetes de merluza sazonados con una pizca de sal. Al colocar las rodajas de merluza las movemos un poco para que se vayan marcando, movemos ligeramente la cacerola hacia arriba y hacia abajo unos segundos.",
        "Para que la merluza nos quede jugosa y entera debe cocinarse a fuego vivo pero hay que ir con cuidado para que el pescado no se queme o se pase de cocción.",
        "Una vez comprobemos como las rodajas de merluza por arriba comienzan a blanquear, es hora de dar a las rodajas de merluza la vuelta: para ello nos ayudaremos de una espátula de silicona, con cuidado les daremos la vuelta.",
        "Mientras se cocinan por el otro lado vertemos por encima el majado de perejil, ajo y aceite de oliva virgen extra, repartimos bien con ayuda de una cucharita.",
        "Una vez la merluza esté cocinada, le damos la vuelta de nuevo unos minutos para que el ajo se haga un poquito. Retiramos del fuego y servimos inmediatamente.",
        "Como guarnición podemos hornear unas patatas o unas verduras al gusto.",
    ],
};

receta_13 = {
    id: 13,
    titulo: "ENSALADA DE PASTA",
    tiempo: ["ALMUERZO", "CENA"],
    tipo: ["Típica peruana", "Vegetariana", "Comida rápida"],
    calorias: 230,
    ingredientes: [
        "1 kg mejillones",
        "Limón (opcional)",
        "Perejil (opcional)",
        "100 g trigo bulgur",
        "2 cebolletas frescas",
        "150 g perejil picado",
        "hierbabuena fresca",
        "500 g tomates rojos maduros",
        "125 g zumo de limón",
        "Sal",
        "Pimienta",
        "Aceite de oliva virgen extra",
    ],
    preparacion: [
        `Ponemos un cazo con agua a calentar.`,
        "Cuando empiece a humear, añadimos el trigo bulgur y cocinamos durante 10 minutos.",
        "Transcurrido el tiempo, escurrimos y pasamos por agua bien fría para que pierda calor, reservamos.",
        "Colocamos el perejil en un bol y añadimos cebolleta picada.",
        "Vertemos los mejillones limpios en una cazuela sin nada en su interior, tapamos la cazuela y llevamos a fuego medio.",
        "Poco a poco los mejillones se irán abriendo, id meneando de vez en cuando la cazuela.",
        "Cuando estén todos abiertos, se agregan a la mezcla.",
        "Incorporamos además el bulgur cocinado, los tomates picados y la hierbabuena picada, mezclamos todo bien.",
        "Añadimos el zumo de limón, un buen chorro de aceite de oliva virgen extra, y salpimentamos.",
    ],
};

let recetas = [receta_1, receta_2, receta_3, receta_4, receta_5, receta_6,receta_7, receta_8, receta_9, receta_10, receta_11, receta_12, receta_13];

function tarjeta(titulo, id, calorias){
    card = `<div id="receta_${id}" class="col d-none">
    <div class="card h-100">
        <img src="./assets/img/recetas/receta_${id}.png" class="card-img-top img-fluid" alt="...">
        <div class="card-body">
            <h5 class="card-title float-left" style="font-size:1.1em;color:black "> ${titulo}
            <img src="img/manzanita.png" alt="" 
            class="img-fluid float-right mt-0"style="height:1.8em; float:right; padding-top:0">
            </h5>
            <div class="d-flex">
                <p class="card-text" style="font-size:1em">Tiempo de cocción: </p><p style="font-size:1em">1h</p>
            </div>
            <div class="d-flex">
                <p class="card-text" style="font-size:1em">Calorías: </p><p style="font-size:1em">${calorias}cal</p>
            </div>
            <button type="button" class="btn btn-link text-capitalize" data-bs-toggle="modal" 
            data-bs-target="#recetaModal_${id}" style="padding-left:0;padding-right:3rem; font-family: 'Roboto', serif;font-size:1.2rem;">Ingredientes</button>
            <a href="./calendario.php" type="button" class="btn text-capitalize" style="font-size:1rem;padding-left:0.5rem ;padding-right:0.5rem;
            background:linear-gradient(88.33deg, #0779E4 -7.64%, #000000 145.94%);color:white; border-radius:20px" >Añadir a calendario 
            <img src="img/simbolo.png" alt="" class="img-fluid" style="height:1.6rem">
            </a>
        </div>
    </div>
    </div>`;
    return card;
}

function generar_listas(lista){
    grupo_ing = '';
    lista.forEach(elemento => {
        grupo_ing += `<li style="list-style: disc;font-size:0.9rem">${elemento}</li>`
    });
    return grupo_ing;
}

function html_receta(receta){
    html = tarjeta(receta.titulo, receta.id, receta.calorias) + `<!-- Ingredientes -->
    <div class="modal fade" id="recetaModal_${receta.id}" tabindex="-1" aria-labelledby="recetaModalLabel_${receta.id}" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable" style="max-width:700px">
            <div class="modal-content" style="background-color:#F1FDFE;">
                <div class="modal-header">
                    <h5 class="modal-title text-center font-weight-bolder" id="recetaModalLabel_${receta.id}" 
                    style="color:#032D53;font-size:1.2rem">INGREDIENTES QUE NECESITAS PARA ${receta.titulo}
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="d-flex justify-content-around">
                        <h6 style="font-size:0.8rem;font-weight:bolder;color:black"><img src="img/icon1.png" style="height:2rem" alt="">
                        4 PORCIONES</h6>
                        <h6 style="font-size:0.8rem;font-weight:bolder;color:black"><img src="img/icon2.png" style="height:2rem" alt="">
                        TIEMPO DE PREPARACIÓN: 10 MIN</h6>
                        <h6 style="font-size:0.8rem;font-weight:bolder;color:black"><img src="img/icon2.png" style="height:2rem" alt="">
                        TIEMPO DE COCCIÓN: 10 MIN</h6>
                    </div>
                    <h6 style="color:#032D53;font-weight:bolder">INGREDIENTES:</h6>
                    <img src="./assets/img/recetas/receta_${receta.id}.png"  class="img-fluid" style="display:inline-block;float:right;height:16rem; border-radius:15px" alt="">
                    <ul style="color:black">`+generar_listas(receta.ingredientes)+`</ul>
                    
                    <h6 style="color:#032D53;font-weight:bolder">PREPARACIÓN:</h6>
                    <ol style="color:black">`+generar_listas(receta.preparacion)+`</ol>                    
                </div>
            </div>
        </div>
    </div>`;
    return html;
}

function option_radio() { 
    if(document.getElementById('btnradio1').checked) {
        return document.getElementById("btnradio1").value;
    }
    else if(document.getElementById('btnradio2').checked) {
        return document.getElementById("btnradio2").value; 
    }
    else if(document.getElementById('btnradio3').checked) {
        return document.getElementById("btnradio3").value; 
    }
}

function option_selected() {
    let ddl = document.getElementById("gustos");
    return ddl.options[ddl.selectedIndex].value;
}

function check_class(receta){
    return document.getElementById(`receta_${receta.id}`).classList.contains("d-none");
}

function reiniciar_search(receta){
    if (!check_class(receta)) {
        document.getElementById(`receta_${receta.id}`).classList.toggle("d-none");
    } else{ 
        return;
    }
}

document.addEventListener('DOMContentLoaded', function() {
    let html='';
    recetas.forEach(receta => {html += html_receta(receta)});
    document.getElementById("space-list").innerHTML=html;
});

function searchReceta(){
    let option = option_radio();
    let selected = option_selected();
    let search = document.getElementById("search").value.toUpperCase();
    recetas.forEach(receta => reiniciar_search(receta));
    console.log(option);
    recetas.forEach(receta => {
        if (receta.tiempo.includes(option) && receta.tipo.includes(selected) && receta.titulo.includes(search)){
            document.getElementById(`receta_${receta.id}`).classList.toggle("d-none");
        }
    });
}